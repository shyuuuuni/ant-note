# MVC 패턴이란?

> 대표적인 소프트웨어 아키텍쳐중 하나인 모델-뷰-컨트롤러(Model-View-Controller, MVC) 패턴에 대해 알아보자.

- [MVC 패턴이란?](#mvc-패턴이란)
  - [아키텍쳐란?](#아키텍쳐란)
    - [소프트웨어 디자인 패턴](#소프트웨어-디자인-패턴)
    - [소프트웨어 아키텍쳐](#소프트웨어-아키텍쳐)
  - [Model? View? Controller?](#model-view-controller)
    - [모델 (Model)](#모델-model)
    - [뷰 (View)](#뷰-view)
    - [컨트롤러 (Controller)](#컨트롤러-controller)
  - [모델-뷰-컨트롤러 패턴의 단점](#모델-뷰-컨트롤러-패턴의-단점)
  - [래퍼런스](#래퍼런스)

## 아키텍쳐란?

### 소프트웨어 디자인 패턴

패턴(Pattern) 이라는 단어의 의미처럼, 소프트웨어 디자인 패턴은 소프트웨어 설계 시 문제 해결을 위한 어떠한 규정이나 약속을 의미한다.

디자인 패턴을 사용하면 소프트웨어를 설계할 때 특정 문제를 해결하기 유용하고, 이후 동일한 문제가 발생했을 때 재사용하기 좋은 코드를 작성할 수 있다.

대표적인 예시로 GoF(Gang of Four) 디자인 패턴인 추상 팩토리(Abstract Factory) 패턴, 싱글톤(Singleton) 패턴 등이 있다.

### 소프트웨어 아키텍쳐

소프트웨어 아키텍쳐란 디자인 패턴보다 더 넓은 범위의 설계이다.

클린코드의 저자로 유명한 마틴 파울러(Martin Fowler)가 작성한 칼럼 [Who Need an Architect?](https://martinfowler.com/ieeeSoftware/whoNeedsArchitect.pdf)의 도입부에서 소프트웨어 아키텍쳐를 다음과 같이 정의했다.

> "In most successful software projects, the expert developers working on that project have a shared understanding of the system design. This shared understanding is called ‘architecture."
> : 대부분의 성공한 소프트웨어 프로젝트에서 개발 전문가들이 시스템을 디자인할때 가지고 있는 공통된 이해를 아키텍쳐라고 부른다.

> "architecture is the set of design decisions that must be made early in a project."
> : 아키텍쳐는 (중간에 바꾸기 어렵기 때문에) 프로젝트 초기에 결정해야만 하는 하나의 디자인 모음이다.

> "Architecture is about the important stuff. Whatever that is."
> : 아케틱쳐는 그것이 무엇이든지 중요한 것이다.

한마디로 요약하면 넓은 범위에서 소프트웨어를 설계하는 좋은 방법론을 소프트웨어 아키텍쳐라고 한다.

대표적인 소프트웨어 아키텍쳐로 이번에 소개할 MVC 패턴, 여러 겹의 레이어로 소프트웨어를 설계하는 Layered 패턴, 클라이언트-서버 패턴 등이 있다.

## Model? View? Controller?

이제 세부적으로 모델-뷰-컨트롤러 아키텍쳐에 대해 알아보자.

모델-뷰-컨트롤러 패턴의 핵심 원리는 `비즈니스 로직과 화면에 표시하는 부분을 분리하는 것`이다.

그래서 시스템 디자인을 다음과 같이 모델, 뷰, 컨트롤러 3가지로 나누었기 때문에 모델-뷰-컨트롤러 패턴으로 부른다.

![mvc](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FYDAei%2FbtrjYhat7fs%2Fq7ETFhxgEw42C4dcT1uFZK%2Fimg.png)
: \*출처(https://cocoon1787.tistory.com/733)

- 모델(Model): 데이터를 이용하여 비즈니스 로직을 처리하는 역할을 가진다.
- 뷰(View): 모델에서 처리한 결과를 이용해 레이아웃과 같은 화면에 표시될 내용을 처리하는 역할을 가진다.
- 컨트롤러(Controller): 모델과 뷰를 연결하며, 사용자 요청을 받아서 연결해주는 역할을 가진다.

이렇게 역할을 분리하면 각 역할별로 코드를 분리함으로써 조금 더 유연한 소프트웨어를 개발할 수 있고, 로직 등의 재사용성을 높일 수 있다.

이제 위의 세가지 레이어에 대해 조금 더 자세히 알아보자.

### 모델 (Model)

> 소프트웨어가 처리하는 부분을 담당하는 레이어

소프트웨어의 비즈니스 로직을 처리하기 위한 모든 부분이 담겨있다.

데이터베이스에 접근하여 CRUD를 처리하거나, 함수나 메소드를 통해 데이터를 가공하는 등 비즈니스 로직을 처리한다.

모델은 다음과 같은 조건을 만족해야 한다.

- 로직과 관련된 모든 데이터를 가지고 있어야 한다.
- 뷰나 컨트롤러의 모습을 알 수 없다.
- 모델이 변경되면 변경을 알리는 기능을 제공해야 한다.

### 뷰 (View)

> 소프트웨어 보여주는 부분을 담당하는 레이어

사용자 인터페이스를 담당한다.

컨트롤러의 요청에 따라 화면에 표시하는 데이터를 업데이트 하거나, 사용자가 화면의 데이터를 변경하면 이를 반영할 수 있도록 알리는 기능을 처리한다.

뷰는 다음과 같은 조건을 만족해야 한다.

- 뷰는 받은 데이터를 보여주는 역할만 담당한다. (따로 데이터를 저장하여 사용하면 안된다.)
- 모델이나 컨트롤러의 모습을 알 수 없다.
- 사용자에 의해 데이터가 변경되면 이를 알리는 기능을 제공해야 한다.

### 컨트롤러 (Controller)

> 모델과 뷰 사이의 연결을 담당하는 레이어

모델과 뷰를 소개하면서 이 둘은 다른 레이어에 대해 모른채 이벤트 발생 시 알리는 기능을 통해 변경을 알리기만 한다.

따라서 둘 사이의 변경사항을 받아서 전달해주는 레이어인 컨트롤러가 필요하다.

또한 모델-뷰-컨트롤러 패턴에서 사용자와 연결되는 첫번째 레이어가 바로 컨트롤러 레이어이다.

- 모델과 뷰의 변경사항을 받아서 가공하고 전달하는 역할을 담당한다.
- 모델과 뷰의 모습을 알 고 있어야 한다. (둘 사이를 연결하는 역할이므로)

## 모델-뷰-컨트롤러 패턴의 단점

모델과 뷰를 분리하여 독립적인 패턴을 기대한 모델-뷰-컨트롤러 패턴이지만, 실제로는 모델과 뷰가 서로 의존성을 가지고 있다.

모델을 살펴보면 결국 `View - Controller - Model` 관계로 중간에 컨트롤러를 두고 모델과 뷰가 서로 의존적으로 소통을 하고 있는 모습을 볼 수 있다.

따라서 소프트웨어가 거대해 질 경우 하나의 컨트롤러가 많은 역할과 책임을 가지게 되고, 그에 따라 뷰와 모델이 의존적으로 늘어나면서 유지보수에 어려움을 가질 수 있다. (이렇게 거대해진 MVC 패턴을 Massive-View-Controller 라고 부른다.)

이러한 단점을 개선하기 위하여 MVP, MVVM과 같은 파생되는 여러 소프트웨어 아키텍쳐가 등장했다.

## 래퍼런스

https://developer.mozilla.org/ko/docs/Glossary/MVC

https://martinfowler.com/ieeeSoftware/whoNeedsArchitect.pdf

# 연산자

> ES5의 연산자를 알아보자.

- [연산자](#연산자)
  - [자바스크립트 연산자](#자바스크립트-연산자)
    - [표현식의 평가(Evaluation)](#표현식의-평가evaluation)
  - [할당 연산자](#할당-연산자)
  - [산술 연산자](#산술-연산자)
    - [산술 연산자 +](#산술-연산자-)
    - [숫자 변환](#숫자-변환)
    - [산술 연산자 - \* / %](#산술-연산자-----)
  - [단항 연산자](#단항-연산자)
    - [단항 + 연산자](#단항--연산자)
    - [단항 - 연산자](#단항---연산자)
  - [후위/전위 연산자](#후위전위-연산자)
    - [++ 연산자](#-연산자)
    - [-- 연산자](#---연산자)
  - [NOT 연산자 !](#not-연산자-)
  - [관계 연산자](#관계-연산자)
    - [유니코드 (Unicode)](#유니코드-unicode)
    - [UTF](#utf)
    - [관계 연산자](#관계-연산자-1)
  - [비교 연산자](#비교-연산자)
    - [== 연산자](#-연산자-1)
    - [!= 연산자](#-연산자-2)
    - [=== 연산자](#-연산자-3)
    - [!== 연산자](#-연산자-4)
  - [콤마 연산자 ,](#콤마-연산자-)
  - [그룹 연산자 ()](#그룹-연산자-)
  - [논리 연산자](#논리-연산자)
    - [|| 연산자](#-연산자-5)
    - [&& 연산자](#-연산자-6)
  - [조건 연산자](#조건-연산자)
  - [연산자 우선순위](#연산자-우선순위)
    - [우선순위 표](#우선순위-표)
  - [래퍼런스](#래퍼런스)

## 자바스크립트 연산자

**규칙**에 따라 계산하거나 작동하는 것을 연산자라고 한다.

**예시**

- `산술 연산자`: 연산자 양 옆의 두 값을 산술 연산하여 결과를 반환한다.
- `typeof`: 연산자 뒤의 값을 입력받아 타입을 계산하여 반환한다.

### 표현식의 평가(Evaluation)

기본 문법 포스팅에서 설명한 것 처럼, 자바스크립트에서 `;`로 끝나는 문장 단위를 표현식이라고 한다.

**예시 코드**

```javascript
1 + 2;
var total = 50 + 60;
var value = total / (1 + 2);
```

`표현식의 평가`는 그 평가의 결과를 반환하는 것을 의미한다.

자바스크립트는 표현식의 연결된 형태로 구성되어 있기 때문에 표현식 내에서 여러번의 평가가 이루어질 수 있다.

## 할당 연산자

**_단일 할당 연산자_**

- **`=`**
- `=` 하나만 사용한다.
- 자바스크립트는 왼쪽에서 오른쪽으로 해석한다. 이때 `=`를 만나면 오른쪽의 표현식의 평가 결과를 왼쪽 변수에 할당한다.

```javascript
var result = 100;
```

**복합 할당 연산자**

- **`+= -= *= /= %=`**
- **`<<= >>=`**
- **`>>>= &= ^= |=`**
- `=` 앞에 연산자를 작성한다.
- 앞의 연산자를 먼저 연산한 후 할당한다.

```javascript
var num = 1;
num += 2; // num(1) + 2를 먼저 계산하고, 그 값인 3을 num에 할당한다.
```

## 산술 연산자

**`+ - * / %`**

- 양 쪽의 표현식을 평가하여 산술 연산한 값을 반환한다.
- 사칙연산(덧셈, 뺄셈, 곱셈, 나눗셈, 나머지 연산)
- 연산은 왼쪽에서 오른쪽으로 진행하면서 계산한다.

### 산술 연산자 +

연산자 양쪽의 표현식을 덧셈 연산하여 반환한다.

만약 한 쪽의 표현식이라도 숫자가 아닌 문자열인 경우 **연결** 하여 반환한다.

**예시 코드**

```javascript
1 + 2 + 3; // (1 + 2) + 3 = 6

1 + 2 + "3"; // (1 + 2) + "#"  = "33", 문자열을 반환한다.
```

> 참고) 자바스크립트는 최대한 에러를 줄여서 전체 웹페이지를 표시하지 않는 문제를 방지하려고 한다. 그래서 더하기 연산 시 숫자가 아니여도 문자열을 연결하여 반환하는 것이다.

### 숫자 변환

산술 연산자는 숫자 타입을 연산하는 연산자이다.

따라서 다음과 같이 연산 전에 숫자로 변환을 시도한다.

**(변환 전) - (변환 후)**

- `Undefined` - `NaN`
- `Null` - `+0`
- `Boolean` - `true: 1, false: 0`
- `Number` - `변환 전 숫자와 동일`
- `String` - `숫자: 해당 숫자로 변환, +연산은 제외`

**예시 코드1**

```javascript
var x; // undefined
100 + x; // 100 + NaN = NaN

100 + null; // 100 + 0 = 100

100 + false; // 100 + 0 = 100

100 + true; // 100 + 1 = 101
```

**예시 코드2**

덧셈 연산자를 제외한 연산자를 문자열을 숫자로 변환 후 계산한다.

만약 문자열이 숫자로 이루어지지 않았다면 `NaN`으로 변환한다.

```javascript
123 + "23"; // "123" + "23" = "12323" (연결)
123 - "23"; // 123 - 23 = 100 (변환 후 연산)

"AA" - 123; // NaN - 123 = NaN
```

### 산술 연산자 - \* / %

**뺄셈 연산자**

- `-` 로 구성된다.
- 좌측 표현식의 연산 결과에서 우측 표현식의 연산 결과를 뺀다.

**예시 코드**

```javascript
123 - 23; // 100
"123" - 23; // 100
```

---

**곱셈 연산자**

- `*` 로 구성된다.
- 좌측 표현식의 연산 결과와 우측 표현식의 연산 결과를 곱한다.
- 양쪽 표현식의 연산 결과(변환 결과) 중 하나라도 숫자가 아니면 `NaN`을 반환한다.

**예시 코드**

```javascript
10 * "20"; // 200
10 * true; // 10
10 * false; // 0
10 * null; // 0
10 * "A"; // "A"는 숫자로 변환할 수 없음. NaN
```

**주의점**

소수 값이 생길 시 추가적인 처리가 필요할 수 있다.

IEEE 754 부동 소수점 처리 방식에서 나타나는 문제점으로, 소수 계산 시 오차가 발생한다.

**예시 코드, 해결법**

먼저 소수를 정수로 변환 한 뒤, 모든 연산이 끝나고 소수로 변환한다.

```javascript
2.3 * 3; // 6.8999999999999995 (오차O)
(2.3 * 10 * 3) / 10; // 6.9 (오차X)
```

> 참고: **소수 끝에 3 또는 6이 있는 경우** 위와 같이 오차가 발생할 수 있다. 이러한 경우 정수로 변환한 뒤 소수로 바꿔주는 작업이 필요하다.

---

**나누기 연산자**

- `/` 로 구성된다.
- 왼쪽 표현식 평가 결과를 오른쪽 표현식 평가 결과로 나눈 몫을 반환한다.
- 아래 조건에 만족할 경우 `NaN`을 반환한다.
  - 양 쪽의 평과 결과가 하나라도 숫자가 아닌 경우
  - 분모와 분자가 모두 0일 경우 (`0 / 0;`)
- 분모가 0이면 항상 0을 반환한다.
- 분자가 0이면 `Infinity`를 반환한다.

**주의점 예시 코드**

나누기는 0 값을 주의해서 사용해야 한다.

```javascript
0 / 0; // NaN
0 / 10; // 0
10 / 0; // Infinity
```

---

**나머지 연산자**

- `%` 로 구성된다.
- 왼쪽 표현식 평과 결과를 오른쪽 표현식 평과 결과로 나눈 나머지를 반환한다.

**예시 코드**

곱셈 연산과 마찬가지로 IEEE 754 부동 소수점 연산 간 소수의 끝이 3, 6일 경우 오차가 발생할 수 있다.

이 경우 마찬가지로 정수 연산으로 바꿔서 계산한 뒤 다시 소수로 바꿔주는 작업을 더한다.

```javascript
5 % 2.5; // 0
5 % 2.3; // 2.173913043478261 (오차O)
(5 * 10 - 2 * 2.3 * 10) / 10; // 0.4
```

## 단항 연산자

- 피연산자가 하나만 있는 연산자
- 피연산자 좌측에 연산자를 붙여서 사용한다.

### 단항 + 연산자

- 우측의 피연산자 값을 `Number` 타입으로 변환한다.

> Number() 함수와 같은 역할을 한다.

**예시 코드**

```javascript
var value = "10"; // String
typeof value; // String
typeof +value; // Number
typeof Number(value); // Number
```

### 단항 - 연산자

- 우측의 피연산자 값(숫자 변환 결과)의 부호를 바꾼다.
- 원래 값을 변화시키지 않는다.

**예시 코드**

```javascript
var value = 7; // +7
-value; // -7
10 + -7; // 10 + (-7) = 3

-"A"; // NaN
-null; // -0
```

## 후위/전위 연산자

### ++ 연산자

**1. 후위 ++ 연산자**

- `value++` 형태를 가진다.
- 변수의 값을 1 증가시킨다.
- **표현식이 수행된 이후 1을 증가시킨다.**

**예시 코드**

```javascript
var one = 1;
var nxt = one++; // nxt = 1
console.log(one); // 2
console.log(nxt); // 1
```

---

**2. 전위 ++ 연산자**

- `++value` 형태를 가진다.
- 마찬가지로 변수의 값을 1 증가시킨다.
- **표현식의 평가 이전에 1을 증가시키고, 표현식에서는 증가된 값을 사용한다.**

**예시 코드**

```javascript
var one = 1;
var nxt = one++; // nxt = 2
console.log(one); // 2
console.log(nxt); // 2
```

### -- 연산자

**1. 후위 -- 연산자**

- `value--` 형태를 가진다.
- 변수의 값을 1 감소시킨다.
- **표현식이 수행된 이후 1을 감소시킨다.**

**예시 코드**

```javascript
var two = 2;
var nxt = two--; // nxt = 2
console.log(two); // 1
console.log(nxt); // 2
```

---

**2. 전위 -- 연산자**

- `--value` 형태를 가진다.
- 마찬가지로 변수의 값을 1 감소시킨다.
- **표현식의 평가 이전에 1을 감소시키고, 표현식에서는 감소된 값을 사용한다.**

**예시 코드**

```javascript
var two = 2;
var nxt = --two; // nxt = 1
console.log(two); // 1
console.log(nxt); // 1
```

## NOT 연산자 !

- 논리 연산자이다.
- `!value` 형태를 가진다.
- 작동 방식:
  1. 표현식을 평가하여 평가 결과를 얻는다.
  2. 평과 결과를 `true, false`로 변환한다.
  3. `true`면 `false`, `false`면 `true`를 반환한다.
- 원래 값은 변하지 않는다.

**예시 코드**

```javascript
var t = true;
console.log(!t); // false
console.log(t); // true (원래 값)
```

## 관계 연산자

### 유니코드 (Unicode)

- 전 세계의 모든 문자를 통합하여 코드화 한 것이다.
- 언어의 문자, 이모지 등이 포함된다.
- 코드 값을 코드 포인트(Code Point) 라고 한다.
- `0000~FFFF`, `10000~1FFFF` 코드 포인트로 관리한다.

**표기 방법**

> 참고로 ES6에서는 새로운 표기 방법이 추가되었다.

- `역슬래시 + 'u' + 숫자` 형태를 가진다.
- 역슬래시를 문자로 표기하려면 `\\`(역슬래시 2개) 를 작성하면 된다.
- ES5 에서는 `10000~1FFFF` 를 사용하기 어렵기 때문에 ES6 사용을 권장한다.

**예시 코드**

```javascript
console.log("\u0031"); // 1
console.log("\u0041"); // A
console.log("\u1100"); // ㄱ
console.log("\uac01"); // 각
```

### UTF

- `Unicode Transformation Format`
- 즉, 유니코드의 코드 포인트로의 매핑 방법을 의미한다.
- `UTF-8, UTF-16, UTF-32` 등으로 표기한다.
  - `HTML`에서 작성한 `<meta charset="utf-8">`이 이것을 나타낸다.
  - `UTF-8`은 8비트로 코드 포인트를 매핑한다는 의미이다.
  - 같은 용어로 `8비트 인코딩`이라고 한다.

### 관계 연산자

- `>, >=, <, <=` 등의 연산자가 있다.
- 각각 왼쪽 표현식보다 오른쪽 표현식이 `크다, 크거나 같다, 작다, 작거나 같다`의 의미를 가진다.
- 아래 `> 연산자` 예시를 통해 특성을 알아보자.

**예시: > 연산자**

- **숫자 > 숫자**: 왼쪽 표현식 평가 결과가 오늘쪽 표현식 평가 결과보다 크면 `true`를 반환하고, 그렇지 않다면 `false`를 반환한다.
- **문자가 포함된 경우**:
  - 한 쪽의 표현식이 문자열 타입이라면 `false`를 반환한다.
  - 양 쪽이 모두 문자열 타입이라면 유니코드 사전 순서대로 비교한다.

**예시 코드**

```javascript
3 > 1; // true

2 > "1"; // "1"을 숫자로 변환, true
1 > "A"; // false

"\u0033" > "\u0032"; // true
"A" > "1"; // \u0041 > \u0031, true
"가" > "다"; // 사전 순 = 유니코드 등록 순, true

// 문자를 하나씩 비교
// A-A 비교, 0-2비교(false반환), ...
"A07" > "A27"; // false
```

## 비교 연산자

### == 연산자

- `동등 연산자`라고 부른다.
- 왼쪽 표현식 평가 결과와 오른쪽 표현식 평가 결과가 같으면 `true`를 반환하고, 그렇지 않으면 `false`를 반환한다.
- 값의 타입을 비교하지 않는다.
- `숫자 == 문자` 형태일 때 문자 타입을 숫자 타입으로 변환하여 비교한다.

**예시 코드**

**주의**: 값만 비교하므로 `1 == '1'`이나 `undefined == null` 등이 `true`를 반환한다.

```javascript
1 == "1"; // 1 == 1, true

var value; // undefined
value == undefined; // true

var n_value; // undefined
n_value == null; // true
```

### != 연산자

-` 부등 연산자`라고 부른다.

- 왼쪽 표현식 평가 결과와 오른쪽 표현식 평가 결과가 다르면 `true`를 반환하고, 그렇지 않으면 `false`를 반환한다.

### === 연산자

- `일치 연산자`라고 부른다.
- 왼쪽 표현식 평가 결과와 오른쪽 표현식 평가 결과의 **값과 타입이 모두 같으면** `true`를 반환하고, 그렇지 않으면 `false`를 반환한다.
- 값과 타입까지 비교할 수 있으므로 비교적 안전하게 비교할 수 있다.

**예시 코드**

값은 같지만 타입이 다른 경우:

```javascript
1 === 1; // true
1 === "1"; // false
```

마찬가지로 값은 같지만 타입이 다른 경우:

```javascript
var value; // undefined
value == null; // true
value === null; // false
```

### !== 연산자

- `불일치 연산자`라고 부른다.
- `일치 연산자`의 반대 특징으로, 값 또는 타입이 다르면 `true`를 반환하고, 그렇지 않으면 `false`를 반환한다.

## 콤마 연산자 ,

- 콤마로 표현식을 분리한다.
- 기본 문법에서 한 `var` 키워드 내에서 변수를 선언할 때 콤마로 구분하였다.

**예시 코드**

```javascript
var a = 1,
  b = 2;
console.log(a); // 1
console.log(b); // 2
```

## 그룹 연산자 ()

- 우선순위를 부여하는 연산자이다.
- 한 쌍의 괄호 `()`를 이용해 사용한다.
- 소괄호 내의 표현식을 먼저 평가한다.

**예시 코드**

```javascript
var value = 5 / (2 + 3); // 5 / 5
console.log(value); // 1
```

## 논리 연산자

### || 연산자

- `논리 OR 연산자`라고 부른다.
- 피연산자 표현식의 평가 결과가 하나라도 `true`이면 `true`, 그렇지 않다면 `false`이다.
- 중간에 `true` 인 피연산자를 만나면 그 이후는 연산하지 않는다.

**예시 코드**

- 중간에 `true`값이 반환된 값이 있다면 그 값을 반환한다.

```javascript
var x = 10;

console.log(false || false); // false
console.log(true || x); // true
console.log(false || x); // 10
console.log(x || true); // 10
```

**예시 코드**

- `value` 변수는 `undefined`이므로 `false`로 변환된다.
- `zero` 변수도 0이므로 `false`로 변환된다.
- `two` 변수는 2이므로 `true`로 변환된다.
- 위 세 변수를 논리 OR 연산 하므로 가장 먼저 `true`값을 가지는 `two` 변수의 값을 반환한다.

```javascript
var value,
  zero = 0,
  two = 2;

console.log(value || zero || two); // 2
```

**예시 코드**

- 마지막까지 모두 비교했을 때 `false`가 반환된다면, 마지막 변수값을 반환한다.

```javascript
var value, // undefined
  zero = 0;

console.log(zero || value); // undefined
```

**예시 코드**

- `two` 변수는 선언되지 않아서 오류가 발생해야 한다.
- 그러나 `one` 변수가 `true` 값을 가져서 이후를 연산하지 않아서 오류가 발생하지 않는다.

```javascript
var one = 1;

console.log(one || two); // 1
```

### && 연산자

- `논리 AND 연산자` 라고 부른다.
- 피연산자 표현식의 평가 결과가 모두 `true`라면 `true`, 그렇지 않다면 `false`이다.
- 중간에 `false`인 피연산자를 만나면 그 이후는 연산하지 않는다.

**예시 코드**

- `&&` 연산 결과 `true`를 반환하면 마지막으로 `true`를 계산한 변수를 반환한다.
- 따라서 아래 예시에서 `two` 변수의 값인 2를 반환한다.

```javascript
var one = 1,
  two = 2;
console.log(one && two); // 2
```

**예시 코드**

- `two` 변수는 선언되지 않아서 오류가 발생해야 한다.
- 그러나 `zero` 변수가 `false` 값을 가져서 이후를 연산하지 않아서 오류가 발생하지 않는다.

```javascript
var zero = 0,
  one = 1;
console.log(zero && one && two); // 0
```

## 조건 연산자

- `exp ? exp1 : exp2` 형태이다.
- `삼항 연산자`라고 부른다.
- 연산 순서:
  1. `exp` 표현식을 평가한다.
  2. 만약 `exp` 표현식이 `true` 값이라면 `exp1` 표현식을 평가하고, `false`라면 `exp2` 표현식을 평가한다.
  3. 평가한 표현식의 결과를 반환한다.

**예시 코드**

```javascript
console.log(1 === 1 ? "같다" : "다르다"); // "같다"
console.log(1 === "1" ? "같다" : "다르다"); // "다르다"
```

## 연산자 우선순위

- 자바스크립트 스펙인 `ECMA-262` 에 작성되어 있지 **않다**.
- `MDN Operator precedence`에 정의되어 있다.
- 우선순위가 가장 높은 것이 `()`이다.
- 우선순위가 가장 높은 것은 `,`이다.
- ES6 연산자의 우선순위도 정의되어 있다.

### 우선순위 표

[MDN 연산자 우선순위](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)에서 제공하는 우선순위 표이다.

우선순위가 높은(19) 순서에서 낮은(1) 순서로 표기한다.

| 우선순위(내림차순) |         연산자 유형          |  결합성  |                              연산자                               |
| :----------------: | :--------------------------: | :------: | :---------------------------------------------------------------: | ---------- | --- | -------- |
|         19         |             그룹             |    -     |                             `( ... )`                             |
|         18         |          멤버 접근           | 좌결합성 |                            ... `.` ...                            |
|                    |       계산된 멤버 접근       | 좌결합성 |                           ... `[ ... ]`                           |
|                    |     new (인자 리스트 O)      |    -     |                         `new ... ( ... )`                         |
|                    |          함수 호출           | 좌결합성 |                           `... ( ... )`                           |
|                    |        옵셔널 체이닝         | 좌결합성 |                               `?.`                                |
|         17         |      new (인자 리스트X)      | 우결합성 |                             `new` ...                             |
|         16         |          후위 증가           |    -     |                             `value++`                             |
|                    |          후위 감소           |    -     |                             `value--`                             |
|         15         |           논리 NOT           | 우결합성 |                                `!`                                |
|                    |           비트 NOT           | 우결합성 |                                `~`                                |
|                    |         단항 양부호          | 우결합성 |                                `+`                                |
|                    |          단항 부정           | 우결합성 |                                `-`                                |
|                    |          전위 증가           | 우결합성 |                             `value++`                             |
|                    |          전위 감소           | 우결합성 |                             `value--`                             |
|                    |            typeof            | 우결합성 |                           `typeof ...`                            |
|                    |             void             | 우결합성 |                            `void ...`                             |
|                    |            delete            | 우결합성 |                           `delete ...`                            |
|                    |            await             | 우결합성 |                            `await ...`                            |
|         14         |           거듭제곱           | 우결합성 |                           ... `**` ...                            |
|         13         |            곱하기            | 좌결합성 |                            ... `*` ...                            |
|                    |            나누기            | 좌결합성 |                            ... `/` ...                            |
|                    |            나머지            | 좌결합성 |                            ... `%` ...                            |
|         12         |            더하기            | 좌결합성 |                            ... `+` ...                            |
|                    |             빼기             | 좌결합성 |                            ... `-` ...                            |
|         11         |       비트 왼쪽 시프트       | 좌결합성 |                               `<<`                                |
|                    |      비트 오른쪽 시프트      | 좌결합성 |                               `>>`                                |
|                    | 부호 없는 비트 오른쪽 시프트 | 좌결합성 |                               `>>>`                               |
|         10         |             미만             | 좌결합성 |                                `<`                                |
|                    |             이하             | 좌결합성 |                               `<=`                                |
|                    |             초과             | 좌결합성 |                                `>`                                |
|                    |             이상             | 좌결합성 |                               `>=`                                |
|                    |              in              | 좌결합성 |                           ... `in` ...                            |
|                    |          instanceof          | 좌결합성 |                       ... `instanceof` ...                        |
|         9          |             동등             | 좌결합성 |                               `==`                                |
|                    |             부등             | 좌결합성 |                               `!=`                                |
|                    |             일치             | 좌결합성 |                               `===`                               |
|                    |            불일치            | 좌결합성 |                               `!==`                               |
|         7          |           비트 AND           | 좌결합성 |                                `&`                                |
|                    |           비트 XOR           | 좌결합성 |                                `^`                                |
|         6          |           비트 OR            | 좌결합성 |                                 `                                 | `          |
|         5          |           논리 AND           | 좌결합성 |                               `&&`                                |
|         4          |           논리 OR            | 좌결합성 |                                 `                                 |            | `   |
|                    |        널 병합 연산자        | 좌결합성 |                               `??`                                |
|         3          |      조건(삼항) 연산자       | 우결합성 |                         `... ? ... : ...`                         |
|         2          |         할당 연산자          | 우결합성 | `=` `+=` `-=` `**=` `*=` `/=` `%=` `<<=` `>>=` `>>>=` `&=` `^=` ` | =` `&&=` ` |     | =` `??=` |
|                    |            yield             | 우결합성 |                            `yield ...`                            |
|                    |           yield\*            | 우결합성 |                           `yield* ...`                            |
|         1          |      쉼표/시퀸스 연산자      | 좌결합성 |                            `... , ...`                            |

## 래퍼런스

https://www.inflearn.com/course/자바스크립트-비기너/

https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Operator_Precedence

# 쿠키와 세션의 필요성

- [쿠키와 세션의 필요성](#쿠키와-세션의-필요성)
  - [HTTP의 특징](#http의-특징)
    - [비상태성 (stateless)](#비상태성-stateless)
    - [비연결성 (connectionless)](#비연결성-connectionless)
  - [🍪 쿠키 (Cookie)](#-쿠키-cookie)
  - [🎫 세션 (Session)](#-세션-session)
  - [참고 문서](#참고-문서)

## HTTP의 특징

쿠키와 세션에 대해 설명하기에 앞서 HTTP의 특징 중 `비상태성`과 `비연결성`에 대해 설명하려고 한다.

### 비상태성 (stateless)

말 그대로 HTTP를 이용한 통신 간에 상태를 유지하지 않는 것을 의미한다.

일반적으로 클라이언트와 서버가 HTTP로 통신을 할 때, 동일한 클라이언트가 서버에 여러번 접근할 경우가 많다.

이때 HTTP를 이용한 통신은 이전에 연결한 클라이언트와의 상태 정보를 따로 저장하지 않는다. 이를 비상태성이라고 한다.

### 비연결성 (connectionless)

일반적으로 HTTP는 3-Way-Handshake 과정을 통해 연결을 시작하고, 데이터를 주고받은 뒤 4-Way-Handshake 과정을 통해 연결을 종료한다.

즉 마찬가지로 클라이언트와 서버가 HTTP로 통신을 한다면, 데이터 전송 이후 연결을 유지하지 않고 연결을 종료한다. 이를 비연결성이라고 한다.

> 참고) 물론 HTTP/1.1 이후 `keep-alive`를 통한 연결을 유지하는 기능이 제공되지만, 일반적으로 HTTP는 비연결성을 가진다고 한다.

이러한 `비상태성`과 `비연결성`으로 인한 특징으로 인해 추가적인 조치를 취하지 않으면 클라이언트가 서버에 연결할 때 마다 인증을 진행해야 하는 번거로움이 발생한다.

이를 해결해 주는 것이 쿠키와 세션이다.

## 🍪 쿠키 (Cookie)

쿠키는 HTTP 통신 시 `사용자의 브라우저에 저장하는 데이터`를 의미한다.

쿠키는 다음과 같은 특징을 가진다.

- 쿠키는 key와 value(string)의 형태로 구성되어 있다.
- 쿠키는 브라우저에 의존적이여서 브라우저마다 쿠키가 다르다.
- 이름과 값, 유효기간 등에 대한 정보를 Key-Value 형식으로 저장한다.

클라이언트-서버 연결 간 처음 쿠키 없이 연결을 시도한 경우 클라이언트를 인증하며, 인증에 성공할 경우 서버에서 클라이언트로 쿠키를 반환한다.

이후 다시 연결 할 경우 **쿠키를 보고 인증을 대신한다.**

그러나 쿠키는 다음과 같은 단점이 있다.

- 브라우저에 의존적이기 때문에 브라우저별로 지원 형태를 바꿔주어야 한다.
- **보안 문제**: 쿠키의 가장 큰 문제점으로, 쿠키 정보가 그대로 노출되며, 브라우저 상에서 수정도 가능하다.
- 쿠키에 많은 데이터가 들어있을 경우 통신 상 오버헤드가 발생한다.

## 🎫 세션 (Session)

세션은 클라이언트의 브라우저에 저장하는 쿠키와 다르게 **세션은 서버에 저장되는 데이터를 의미한다.**

세션은 다음과 같은 장점을 가진다.

- 서버에 저장하기 때문에 쿠키에 비해 **안전하다.**
- 클라이언트별로 고유ID를 발급하고 고유ID 세션 값을 서버에서 저장한다.
- 클라이언트는 서버가 발급한 고유ID를 쿠키로 저장하여 재연결시 고유ID를 쿠키로 전송할 수 있다.

그러나 단점으로는 서버에 저장하기 때문에 쿠키와 다르게 서버에 부하가 발생할 수 있다는 부분이다.

## 참고 문서

정리하자면 쿠키와 세션은 HTTP의 비상태성과 비연결성을 해결하기 위한 솔루션으로 사용되며, 쿠키는 브라우저에, 세션은 서버에 저장하는 방식으로 동작한다.

각각에 대한 깊이 있는 설명은 따로 공부해서 정리하도록 하자!

https://velog.io/@seongguk/쿠키-세션-캐시-비교-정리
